
(function(){
  function P(ctx){this.ctx=ctx;this.w=ctx.canvas.width;this.h=ctx.canvas.height;this.cx=this.w/2;this.cy=this.h/2;this.R=Math.min(this.w,this.h)/2-10;}
  function radar(ctx,vals,labels){var p=new P(ctx),n=labels.length;ctx.clearRect(0,0,p.w,p.h);ctx.strokeStyle="#e5e7eb";
    for(var r=1;r<=4;r++){ctx.beginPath();ctx.arc(p.cx,p.cy,p.R*r/4,0,6.283);ctx.stroke();}
    var pts=[];for(var i=0;i<n;i++){var a=-1.5708+i*6.283/n,v=(vals[i]||0)/100,x=p.cx+p.R*v*Math.cos(a),y=p.cy+p.R*v*Math.sin(a);pts.push([x,y]);ctx.beginPath();ctx.moveTo(p.cx,p.cy);ctx.lineTo(p.cx+p.R*Math.cos(a),p.cy+p.R*Math.sin(a));ctx.stroke();}
    ctx.beginPath();for(var i=0;i<n;i++){var t=pts[i];if(i===0)ctx.moveTo(t[0],t[1]);else ctx.lineTo(t[0],t[1]);}ctx.closePath();ctx.fillStyle="rgba(37,99,235,0.12)";ctx.strokeStyle="#1e293b";ctx.fill();ctx.stroke();
  }
  function bars(ctx,vals){var w=ctx.canvas.width,h=ctx.canvas.height;ctx.clearRect(0,0,w,h);var n=vals.length,bw=w/(n*1.6);
    for(var i=0;i<n;i++){var v=vals[i]||0,bh=(h-20)*v/100,x=(i+0.3)*w/n,y=h-bh-10;ctx.fillStyle="rgba(15,23,42,0.18)";ctx.strokeStyle="#0f172a";ctx.fillRect(x,y,bw,bh);ctx.strokeRect(x,y,bw,bh);}}
  window.Chart=function(ctx,cfg){this.t=cfg.type;this.d=cfg.data;this.ctx=ctx;this.update=()=>{ if(this.t==='radar')radar(ctx,this.d.datasets[0].data,this.d.labels); else bars(ctx,this.d.datasets[0].data); }; this.update();};
})();